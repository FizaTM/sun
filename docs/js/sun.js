(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SunCompiler=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(process){var parser=function(){var o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,11],$V1=[1,18],$V2=[1,16],$V3=[1,15],$V4=[1,12],$V5=[1,25],$V6=[1,26],$V7=[1,27],$V8=[1,28],$V9=[1,20],$Va=[1,19],$Vb=[1,21],$Vc=[1,22],$Vd=[1,23],$Ve=[1,24],$Vf=[1,32],$Vg=[1,33],$Vh=[1,34],$Vi=[1,35],$Vj=[1,36],$Vk=[1,37],$Vl=[1,38],$Vm=[1,39],$Vn=[1,40],$Vo=[1,41],$Vp=[1,42],$Vq=[1,43],$Vr=[1,44],$Vs=[1,45],$Vt=[2,39],$Vu=[7,21,24,30,31,34,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60],$Vv=[2,30],$Vw=[1,56],$Vx=[7,21,24,31,34,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60],$Vy=[19,45,48,61,62,63,64,65],$Vz=[5,17,19,25,27,33,38,39,40,45,48,61,62,63,64,65],$VA=[1,82],$VB=[21,24],$VC=[7,21,24,30,31,34,43,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60],$VD=[7,21,24,31,34,44,47,48,53,54,55,56,57,58,59,60],$VE=[7,21,24,31,34,44,47,48,49,50,52,53,54,55,56,57,58,59,60],$VF=[7,21,24,31,34,44,53,54],$VG=[7,21,24,31,34,44,53,54,55,56],$VH=[7,21,24,31,34,44,53,54,55,56,57,58,59,60],$VI=[17,19,22,25,26,27,32,33,35,36,38,39,40,45,48,61,62,63,64,65];var parser={trace:function trace(){},yy:{},symbols_:{error:2,program:3,proglist:4,EOF:5,stmt:6,NEWLINE:7,function_stmt:8,if_stmt:9,keyword_stmt:10,assignment_stmt:11,loop_stmt:12,while_stmt:13,e:14,stmt_list:15,stmt_block:16,FUNCTION:17,identifier:18,"(":19,params:20,")":21,END:22,param:23,",":24,WHILE:25,END_WHILE:26,LOOP:27,":":28,variable:29,"=":30,TO:31,END_LOOP:32,IF:33,THEN:34,ENDIF:35,ELSE:36,keyword:37,PRINT:38,ENTER:39,RETURN:40,indices:41,index:42,"[":43,"]":44,IDENTIFIER:45,list:46,"+":47,"-":48,"*":49,"/":50,"^":51,"%":52,AND:53,OR:54,"==":55,"!=":56,">":57,"<":58,">=":59,"<=":60,"!":61,BOOL:62,STRING:63,INT:64,FLOAT:65,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"NEWLINE",17:"FUNCTION",19:"(",21:")",22:"END",24:",",25:"WHILE",26:"END_WHILE",27:"LOOP",28:":",30:"=",31:"TO",32:"END_LOOP",33:"IF",34:"THEN",35:"ENDIF",36:"ELSE",38:"PRINT",39:"ENTER",40:"RETURN",43:"[",44:"]",45:"IDENTIFIER",47:"+",48:"-",49:"*",50:"/",51:"^",52:"%",53:"AND",54:"OR",55:"==",56:"!=",57:">",58:"<",59:">=",60:"<=",61:"!",62:"BOOL",63:"STRING",64:"INT",65:"FLOAT"},productions_:[0,[3,2],[4,2],[4,3],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[15,2],[15,3],[16,2],[8,7],[20,0],[20,1],[20,3],[23,1],[13,4],[12,11],[9,5],[9,6],[9,7],[9,8],[11,3],[10,2],[37,1],[37,1],[37,1],[29,1],[29,2],[41,1],[41,2],[42,3],[18,1],[46,0],[46,1],[46,3],[14,1],[14,4],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,3],[14,2],[14,2],[14,1],[14,1],[14,1],[14,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:case 11:this.$=[$$[$0-1]];break;case 3:case 12:$$[$0-2].push($$[$0-1]);this.$=$$[$0-2];break;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 13:this.$=$$[$0];break;case 14:this.$=new yy.FunctionStmt($$[$0-5],$$[$0-3],$$[$0-1]);break;case 15:case 36:this.$=[];break;case 16:case 37:this.$=[$$[$0]];break;case 17:case 38:$$[$0-2].push($$[$0]);this.$=$$[$0-2];break;case 18:this.$=new yy.FunctionParam($$[$0]);break;case 19:this.$=new yy.WhileStmt($$[$0-2],$$[$0-1]);break;case 20:this.$=new yy.LoopStmt($$[$0-8],$$[$0],$$[$0-6],$$[$0-4],$$[$0-3]);break;case 21:this.$=new yy.IfElseStmt($$[$0-3],$$[$0-1],[]);break;case 22:this.$=new yy.IfElseStmt($$[$0-4],$$[$0-1],[]);break;case 23:this.$=new yy.IfElseStmt($$[$0-5],$$[$0-3],$$[$0-1]);break;case 24:this.$=new yy.IfElseStmt($$[$0-6],$$[$0-3],$$[$0-1]);break;case 25:this.$=new yy.Operation("assignment",$$[$0-2],$$[$0]);break;case 26:this.$=new yy.KeywordAction($$[$0-1],$$[$0]);break;case 27:case 28:case 29:case 35:this.$=yytext;break;case 30:this.$=new yy.Variable($$[$0]);break;case 31:this.$=new yy.Variable($$[$0-1],$$[$0]);break;case 32:this.$=[$$[$0]];break;case 33:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 34:this.$=$$[$0-1];break;case 39:this.$=$$[$0];break;case 40:this.$=new yy.FunctionCall($$[$0-3],$$[$0-1]);break;case 41:this.$=$$[$0-1];break;case 42:this.$=new yy.Operation("addition",$$[$0-2],$$[$0]);break;case 43:this.$=new yy.Operation("subtraction",$$[$0-2],$$[$0]);break;case 44:this.$=new yy.Operation("multiplication",$$[$0-2],$$[$0]);break;case 45:this.$=new yy.Operation("division",$$[$0-2],$$[$0]);break;case 46:this.$=new yy.Operation("exponentiation",$$[$0-2],$$[$0]);break;case 47:this.$=new yy.Operation("modulo",$$[$0-2],$$[$0]);break;case 48:this.$=new yy.Operation("conjunction",$$[$0-2],$$[$0]);break;case 49:this.$=new yy.Operation("disjunction",$$[$0-2],$$[$0]);break;case 50:this.$=new yy.Operation("equal",$$[$0-2],$$[$0]);break;case 51:this.$=new yy.Operation("inequal",$$[$0-2],$$[$0]);break;case 52:this.$=new yy.Operation("gt",$$[$0-2],$$[$0]);break;case 53:this.$=new yy.Operation("lt",$$[$0-2],$$[$0]);break;case 54:this.$=new yy.Operation("gte",$$[$0-2],$$[$0]);break;case 55:this.$=new yy.Operation("lte",$$[$0-2],$$[$0]);break;case 56:this.$=new yy.Operation("inversion",$$[$0]);break;case 57:this.$=new yy.Operation("negation",$$[$0]);break;case 58:this.$=yytext==="True"?true:false;break;case 59:this.$=yytext;break;case 60:this.$=parseInt(yytext,10);break;case 61:this.$=parseFloat(yytext);break}},table:[{3:1,4:2,6:3,8:4,9:5,10:6,11:7,12:8,13:9,14:10,17:$V0,18:17,19:$V1,25:$V2,27:$V3,29:14,33:$V4,37:13,38:$V5,39:$V6,40:$V7,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{1:[3]},{5:[1,29],6:30,8:4,9:5,10:6,11:7,12:8,13:9,14:10,17:$V0,18:17,19:$V1,25:$V2,27:$V3,29:14,33:$V4,37:13,38:$V5,39:$V6,40:$V7,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{7:[1,31]},{7:[2,4]},{7:[2,5]},{7:[2,6]},{7:[2,7]},{7:[2,8]},{7:[2,9]},{7:[2,10],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},{18:46,45:$V8},{14:47,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:49,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},o([7,47,48,49,50,51,52,53,54,55,56,57,58,59,60],$Vt,{30:[1,50]}),{28:[1,51]},{14:52,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},o($Vu,$Vv,{41:54,42:55,19:[1,53],43:$Vw}),{14:57,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:58,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:59,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},o($Vx,[2,58]),o($Vx,[2,59]),o($Vx,[2,60]),o($Vx,[2,61]),o($Vy,[2,27]),o($Vy,[2,28]),o($Vy,[2,29]),o([7,19,21,24,30,31,34,43,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60],[2,35]),{1:[2,1]},{7:[1,60]},o($Vz,[2,2]),{14:61,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:62,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:63,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:64,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:65,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:66,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:67,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:68,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:69,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:70,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:71,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:72,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:73,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{14:74,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{19:[1,75]},{7:[1,77],34:[1,76],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},o($Vx,$Vt),{7:[2,26],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},{14:78,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{18:80,29:79,45:$V8},{7:$VA,16:81,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},o($VB,[2,36],{18:17,29:48,46:83,14:84,19:$V1,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve}),o($Vu,[2,31],{42:85,43:$Vw}),o($VC,[2,32]),{14:86,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{21:[1,87],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},o($Vx,[2,56]),o($VD,[2,57],{49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($Vz,[2,3]),o($VD,[2,42],{49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($VD,[2,43],{49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($VE,[2,44],{51:$Vj}),o($VE,[2,45],{51:$Vj}),o($Vx,[2,46]),o($VE,[2,47],{51:$Vj}),o($VF,[2,48],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs}),o($VF,[2,49],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs}),o($VG,[2,50],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,57:$Vp,58:$Vq,59:$Vr,60:$Vs}),o($VG,[2,51],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,57:$Vp,58:$Vq,59:$Vr,60:$Vs}),o($VH,[2,52],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($VH,[2,53],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($VH,[2,54],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($VH,[2,55],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk}),o($VB,[2,15],{20:88,23:89,18:90,45:$V8}),{7:$VA,16:91},{34:[1,92]},{7:[2,25],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},{30:[1,93]},o([7,30],$Vv,{41:54,42:55,43:$Vw}),{26:[1,94]},{6:96,8:4,9:5,10:6,11:7,12:8,13:9,14:10,15:95,17:$V0,18:17,19:$V1,25:$V2,27:$V3,29:14,33:$V4,37:13,38:$V5,39:$V6,40:$V7,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{21:[1,97],24:[1,98]},o($VB,[2,37],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs}),o($VC,[2,33]),{44:[1,99],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},o($Vx,[2,41]),{21:[1,100],24:[1,101]},o($VB,[2,16]),o($VB,[2,18]),{35:[1,102],36:[1,103]},{7:$VA,16:104},{14:105,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},{7:[2,19]},o([22,26,32,35,36],[2,13],{8:4,9:5,10:6,11:7,12:8,13:9,14:10,37:13,29:14,18:17,6:106,17:$V0,19:$V1,25:$V2,27:$V3,33:$V4,38:$V5,39:$V6,40:$V7,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve}),{7:[1,107]},o($Vx,[2,40]),{14:108,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},o($VC,[2,34]),{7:$VA,16:109},{18:90,23:110,45:$V8},{7:[2,21]},{7:$VA,16:111},{35:[1,112],36:[1,113]},{31:[1,114],47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},{7:[1,115]},o($VI,[2,11]),o($VB,[2,38],{47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs}),{22:[1,116]},o($VB,[2,17]),{35:[1,117]},{7:[2,22]},{7:$VA,16:118},{14:119,18:17,19:$V1,29:48,45:$V8,48:$V9,61:$Va,62:$Vb,63:$Vc,64:$Vd,65:$Ve},o($VI,[2,12]),{7:[2,14]},{7:[2,23]},{35:[1,120]},{7:$VA,16:121,47:$Vf,48:$Vg,49:$Vh,50:$Vi,51:$Vj,52:$Vk,53:$Vl,54:$Vm,55:$Vn,56:$Vo,57:$Vp,58:$Vq,59:$Vr,60:$Vs},{7:[2,24]},{32:[1,122]},{28:[1,123]},{18:80,29:124,45:$V8},{7:[2,20]}],defaultActions:{4:[2,4],5:[2,5],6:[2,6],7:[2,7],8:[2,8],9:[2,9],29:[2,1],94:[2,19],102:[2,21],112:[2,22],116:[2,14],117:[2,23],120:[2,24],124:[2,20]},parseError:function parseError(str,hash){if(hash.recoverable){this.trace(str)}else{function _parseError(msg,hash){this.message=msg;this.hash=hash}_parseError.prototype=Error;throw new _parseError(str,hash)}},parse:function parse(input){var self=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;var args=lstack.slice.call(arguments,1);var lexer=Object.create(this.lexer);var sharedState={yy:{}};for(var k in this.yy){if(Object.prototype.hasOwnProperty.call(this.yy,k)){sharedState.yy[k]=this.yy[k]}}lexer.setInput(input,sharedState.yy);sharedState.yy.lexer=lexer;sharedState.yy.parser=this;if(typeof lexer.yylloc=="undefined"){lexer.yylloc={}}var yyloc=lexer.yylloc;lstack.push(yyloc);var ranges=lexer.options&&lexer.options.ranges;if(typeof sharedState.yy.parseError==="function"){this.parseError=sharedState.yy.parseError}else{this.parseError=Object.getPrototypeOf(this).parseError}function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}_token_stack:var lex=function(){var token;token=lexer.lex()||EOF;if(typeof token!=="number"){token=self.symbols_[token]||token}return token};var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";expected=[];for(p in table[state]){if(this.terminals_[p]&&p>TERROR){expected.push("'"+this.terminals_[p]+"'")}}if(lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==EOF?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:lexer.match,token:this.terminals_[symbol]||symbol,line:lexer.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(lexer.yytext);lstack.push(lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=lexer.yyleng;yytext=lexer.yytext;yylineno=lexer.yylineno;yyloc=lexer.yylloc;if(recovering>0){recovering--}}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args));if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input,yy){this.yy=yy||this.yy||{};this._input=input;this._more=this._backtrack=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1){this.yylineno-=lines.length-1}var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}this.yyleng=this.yytext.length;return this},more:function(){this._more=true;return this},reject:function(){if(this.options.backtrack_lexer){this._backtrack=true}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},test_match:function(match,indexed_rule){var token,lines,backup;if(this.options.backtrack_lexer){backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};if(this.options.ranges){backup.yylloc.range=this.yylloc.range.slice(0)}}lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno+=lines.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._backtrack=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(token){return token}else if(this._backtrack){for(var k in backup){this[k]=backup[k]}return false}return false},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var token,match,tempMatch,index;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(this.options.backtrack_lexer){token=this.test_match(tempMatch,rules[i]);if(token!==false){return token}else if(this._backtrack){match=false;continue}else{return false}}else if(!this.options.flex){break}}}if(match){token=this.test_match(match,rules[index]);if(token!==false){return token}return false}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(r){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){var n=this.conditionStack.length-1;if(n>0){return this.conditionStack.pop()}else{return this.conditionStack[0]}},_currentRules:function _currentRules(){if(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}else{return this.conditions["INITIAL"].rules}},topState:function topState(n){n=this.conditionStack.length-1-Math.abs(n||0);if(n>=0){return this.conditionStack[n]}else{return"INITIAL"}},pushState:function pushState(condition){this.begin(condition)},stateStackSize:function stateStackSize(){return this.conditionStack.length},options:{},performAction:function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:return 17;break;case 1:return 33;break;case 2:return 34;break;case 3:return 36;break;case 4:return 35;break;case 5:return 32;break;case 6:return 27;break;case 7:return 31;break;case 8:return 26;break;case 9:return 25;break;case 10:return 22;break;case 11:return 40;break;case 12:return 38;break;case 13:return 39;break;case 14:return 53;break;case 15:return 54;break;case 16:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2);return 63;break;case 17:return 62;break;case 18:return 65;break;case 19:return 64;break;case 20:return 45;break;case 21:return 19;break;case 22:return 21;break;case 23:return 24;break;case 24:return 49;break;case 25:return 50;break;case 26:return 48;break;case 27:return 47;break;case 28:return 51;break;case 29:return 43;break;case 30:return 44;break;case 31:return 52;break;case 32:return 59;break;case 33:return 60;break;case 34:return 57;break;case 35:return 58;break;case 36:return 55;break;case 37:return 56;break;case 38:return 30;break;case 39:return 61;break;case 40:return 28;break;case 41:return 5;break;case 42:return 7;break;case 43:break}},rules:[/^(?:Function\b)/,/^(?:If\b)/,/^(?:Then\b)/,/^(?:Else\b)/,/^(?:EndIf\b)/,/^(?:(EndLoop|LoopEnd|Loop-[Ee]nd)\b)/,/^(?:Loop\b)/,/^(?:to\b)/,/^(?:(EndWhile|WhileEnd)\b)/,/^(?:While\b)/,/^(?:End\b)/,/^(?:Return\b)/,/^(?:Print\b)/,/^(?:Enter\b)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:"[^"]*"|'[^']*')/,/^(?:(True|False))/,/^(?:[0-9]+(?:\.[0-9]+)?\b)/,/^(?:[0-9]+\b)/,/^(?:[a-zA-Z_][a-zA-Z_0-9]*\b)/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:\*)/,/^(?:\/)/,/^(?:-)/,/^(?:\+)/,/^(?:\^)/,/^(?:\[)/,/^(?:\])/,/^(?:%)/,/^(?:>=)/,/^(?:<=)/,/^(?:>)/,/^(?:<)/,/^(?:==)/,/^(?:!=)/,/^(?:=)/,/^(?:!)/,/^(?::)/,/^(?:$)/,/^(?:[\n\r]+)/,/^(?:[\t \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]+)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],inclusive:true}}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=parser;exports.Parser=parser.Parser;exports.parse=function(){return parser.parse.apply(parser,arguments)};exports.main=function commonjsMain(args){if(!args[1]){console.log("Usage: "+args[0]+" FILE");process.exit(1)}var source=require("fs").readFileSync(require("path").normalize(args[1]),"utf8");return exports.parser.parse(source)};if(typeof module!=="undefined"&&require.main===module){exports.main(process.argv.slice(1))}}}).call(this,require("_process"))},{_process:7,fs:2,path:6}],2:[function(require,module,exports){},{}],3:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window&&typeof window.process!=="undefined"&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document&&"WebkitAppearance"in document.documentElement.style||typeof window!=="undefined"&&window&&window.console&&(console.firebug||console.exception&&console.table)||typeof navigator!=="undefined"&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){try{return exports.storage.debug}catch(e){}if(typeof process!=="undefined"&&"env"in process){return process.env.DEBUG}}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":4,_process:7}],4:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug.default=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:5}],5:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>1e4){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],6:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;
for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:7}],7:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],8:[function(require,module,exports){var OPERATIONS_BY_OPERANDS=require("./operations").OPERATIONS_BY_OPERANDS;var exports=module.exports;exports.Variable=function Variable(name,indices){this.type="variable";this.name=name;if(indices===undefined){indices=null}this.indices=indices};exports.KeywordAction=function KeywordAction(keyword,expression){this.type="keyword";this.keyword=keyword;this.expression=expression};exports.IfElseStmt=function IfElseStmt(condition,ifBlock,elseBlock){this.type="if_else";this.condition=condition;this.ifBlock=ifBlock;if(!elseBlock){elseBlock=[]}this.elseBlock=elseBlock};exports.LoopStmt=function LoopStmt(loopStartVar,loopEndVar,start,stop,block){this.type="loop";if(loopStartVar.name!==loopEndVar.name){throw new Error("Variable used at end of loop must be same as start of loop. Expected: "+loopStartVar.name+". Found: "+loopEndVar.name)}this.variable=loopStartVar;this.start=start;this.stop=stop;this.block=block};exports.WhileStmt=function WhileStmt(condition,block){this.type="while";this.condition=condition;this.block=block};exports.FunctionStmt=function FunctionStmt(name,params,block){this.type="function";this.name=name;this.params=params;this.block=block};exports.FunctionParam=function FunctionParam(name){this.type="function_param";this.name=name;this.reference=false};exports.FunctionCall=function FuncionCall(name,params){this.type="function_call";this.name=name;this.params=params};exports.Operation=function Operation(type){this.type=type;if(OPERATIONS_BY_OPERANDS[1].indexOf(type)!==-1){this.operand=arguments[1]}else if(OPERATIONS_BY_OPERANDS[2].indexOf(type)!==-1){this.left=arguments[1];this.right=arguments[2]}else if(type==="assignment"){this.left=arguments[1];this.right=arguments[2]}else{throw new Error("Unhandled node type: '"+type+"'")}}},{"./operations":9}],9:[function(require,module,exports){var OPERATIONS=[{name:"negation",operands:1,type:"number",execution:function(a){return-a}},{name:"inversion",operands:1,type:"boolean",execution:function(a){return!a}},{name:"addition",operands:2,type:"number",execution:function(a,b){return a+b}},{name:"subtraction",operands:2,type:"number",execution:function(a,b){return a-b}},{name:"multiplication",operands:2,type:"number",execution:function(a,b){return a*b}},{name:"division",operands:2,type:"number",execution:function(a,b){return a/b}},{name:"exponentiation",operands:2,type:"number",execution:Math.pow},{name:"modulo",operands:2,type:"number",execution:function(a,b){return a%b}},{name:"gt",operands:2,type:"number",execution:function(a,b){return a>b}},{name:"lt",operands:2,type:"number",execution:function(a,b){return a<b}},{name:"gte",operands:2,type:"number",execution:function(a,b){return a>=b}},{name:"lte",operands:2,type:"number",execution:function(a,b){return a<=b}},{name:"equal",operands:2,type:"boolean",execution:function(a,b){return a===b}},{name:"inequal",operands:2,type:"boolean",execution:function(a,b){return a!==b}},{name:"conjunction",operands:2,type:"boolean",execution:function(a,b){return a&&b}},{name:"disjunction",operands:2,type:"boolean",execution:function(a,b){return a||b}}];function transposeArray(array,criteria,prop){var elem;var map={};for(var i=0;i<array.length;i++){elem=array[i];if(map[elem[criteria]]===undefined){map[elem[criteria]]=[elem[prop]]}else{map[elem[criteria]].push(elem[prop])}}return map}function dict(tuples){var map={};for(var i=0;i<tuples.length;i++){var tuple=tuples[i];map[tuple[0]]=tuple[1]}return map}module.exports={OPERATIONS_BY_OPERANDS:transposeArray(OPERATIONS,"operands","name"),OPERATIONS_BY_TYPE:transposeArray(OPERATIONS,"type","name"),OPERATION_EXECUTIONS:dict(OPERATIONS.map(function(operation){return[operation.name,operation.execution]}))}},{}],10:[function(require,module,exports){var debug=require("debug")("perf");var nodes=require("./nodes");debug("Loading built parser...");var parser=require("../build/sun-parser").parser;debug("Loaded built parser");var yy=parser.yy;var oldParse=parser.parse;parser.parse=function parse(src){return oldParse.call(parser,src.trim()+"\n")};for(var prop in nodes){yy[prop]=nodes[prop]}yy._iemitstack=[0];module.exports=parser},{"../build/sun-parser":1,"./nodes":8,debug:3}],11:[function(require,module,exports){var debugPerf=require("debug")("perf");var debugTotalPerf=require("debug")("perf-total");var readlineSync=require("readline-sync");var parser=require("./parser");var operations=require("./operations");var OPERATIONS_BY_OPERANDS=operations.OPERATIONS_BY_OPERANDS;var OPERATIONS_BY_TYPE=operations.OPERATIONS_BY_TYPE;var OPERATION_EXECUTIONS=operations.OPERATION_EXECUTIONS;var checkIsBrowser=new Function("try {return this===window;}catch(e){ return false;}");var isBrowser=checkIsBrowser();if(isBrowser){readlineSync={question:function(){}}}function isFunction(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==="[object Function]"}function isFloat(n){return Number(n)===n&&n%1!==0}function executeOperation(type,a,b){if(OPERATIONS_BY_TYPE["number"].indexOf(type)!==-1){if(typeof a!=="number"){throw new Error("'"+a+"' is not a number")}if(b!==undefined&&typeof b!=="number"){throw new Error("'"+b+"' is not a number")}if(type==="division"&&b===0){throw new Error("Division by zero encountered")}}if(b===undefined){return OPERATION_EXECUTIONS[type](a)}else{return OPERATION_EXECUTIONS[type](a,b)}}function SunCompiler(debug){this.debug=debug;this.returns={};this.contexts={};this.callCounts={};this.functions={};this.outputBuffer=[];this.reset=function reset(){this.returns={};this.contexts={};this.callCounts={};this.functions={};this.outputBuffer=[]};this.setPrintHook=function setPrintHook(cb){this.printHook=cb};this.setEnterHook=function setEnterHook(cb){this.enterHook=cb}}SunCompiler.prototype.createContext=function createContext(name,declParams,callParams){if(callParams.length!==declParams.length){throw new Error("Function '"+name+"' requires "+declParams.length+" arguments but called with "+callParams.length+" arguments")}if(name!=="global"){this.callCounts[name]=Number.isInteger(this.callCounts[name])?this.callCounts[name]+1:0;name=name+"."+this.callCounts[name]}var variables={};for(var i=0;i<declParams.length;i++){variables[declParams[i].name]=callParams[i]}this.contexts[name]=variables;this.returns[name]=null;return name};SunCompiler.prototype.parseBlock=function parseBlock(context,block){for(var i=0;i<block.length;i++){this.parseNode(context,block[i]);if(this.returns[context]){return undefined}}};SunCompiler.prototype.compile=function compile(source){try{debugTotalPerf("Compiling source...");debugPerf("Creating parse tree...");var parseTree=parser.parse(source);debugPerf("Created parse tree");debugPerf("Executing parse tree...");var functions=parseTree.filter(function(node){return node.type==="function"});var otherNodes=parseTree.filter(function(node){return node.type!=="function"});parseTree=functions.concat(otherNodes);var context=this.createContext("global",[],[]);this.parseBlock(context,parseTree);debugPerf("Executed parse tree");debugTotalPerf("Compiling source...")}catch(e){if(this.debug){throw e}this.executePrint(e.message)}finally{if(!this.debug){this.reset()}}};SunCompiler.prototype.executeEnter=function executeEnter(context,node){if(node.type!=="variable"){throw new Error("Enter must be used with variables, found: "+node.type+"'")}var varName=node.name;var answer;if(isBrowser){if(!isFunction(this.enterHook)){throw new Error("No browser implementation of Enter function")}answer=this.enterHook(varName)}else{answer=readlineSync.question("")}var val=parseFloat(answer);val=isNaN(val)?answer:val;this.setVariable(context,node,val)};SunCompiler.prototype.executePrint=function executePrint(val){if(this.debug){this.outputBuffer.push(val)}else if(isBrowser){if(!isFunction(this.printHook)){throw new Error("No browser implementation of Print function")}this.printHook(val)}else{console.log(val)}};function throwIfNonIntIndices(indices){for(var i=0;i<indices.length;i++){var index=indices[i];if(typeof index!=="number"||isFloat(index)){throw new Error("Array index should be integers, found '"+index+"'")}}}SunCompiler.prototype.getVariable=function getVariable(context,variable){var varName=variable.name;var scope=this.contexts[context];var val=scope[varName];if(val===undefined){throw new Error("First usage of variable '"+varName+"', declare the variable above this line first.")}var indices=variable.indices;if(indices){indices=indices.map(function(index){return this.parseNode(context,index)}.bind(this));throwIfNonIntIndices(indices);var key=indices.toString();val=scope[varName][key];if(val===undefined){var elementAccess=indices.map(function(index){return"["+index+"]"}).join("");throw new Error("There's no element at '"+varName+elementAccess+"'")}}else{val=scope[varName]}return val};SunCompiler.prototype.setVariable=function setVariable(context,variable,expression){var scope=this.contexts[context];var indices=variable.indices;var varName=variable.name;var currentVal=scope[varName];var newVal=this.parseNode(context,expression);if(currentVal!==undefined&&typeof currentVal!=="object"&&Array.isArray(indices)){throw new Error("Cannot assign elements of variable '"+varName+"'. It is not an array, it's a '"+typeof val+"'")}var currentType=typeof currentVal;var newType=typeof newVal;if(currentVal!==undefined&&typeof currentVal!=="object"&&currentType!==newType){throw new Error("Assigning a '"+newType+"' to a '"+currentType+"' at variable '"+varName+"'")}if(Array.isArray(indices)){indices=indices.map(function(index){return this.parseNode(context,index)}.bind(this));throwIfNonIntIndices(indices);if(scope[varName]===undefined){this.contexts[context][varName]={}}var key=indices.toString();this.contexts[context][varName][key]=newVal}else{this.contexts[context][varName]=newVal}};SunCompiler.prototype.parseNode=function parseNode(context,node){if(typeof node==="object"&&!Array.isArray(node)&&node!==null){var type=node.type;if(type==="variable"){var val=this.getVariable(context,node);return val}else if(type==="keyword"){if(node.keyword==="Print"){var val=this.parseNode(context,node.expression);this.executePrint(val)}else if(node.keyword==="Enter"){this.executeEnter(context,node.expression)}else if(node.keyword==="Return"){if(context==="global"){throw new Error("Return is illegal in the main function")}var returnVal=this.parseNode(context,node.expression);this.returns[context]=returnVal}}else if(type==="assignment"){var variable=node.left;var val=this.parseNode(context,node.right);this.setVariable(context,variable,val);return undefined}else if(type==="if_else"){var condition=this.parseNode(context,node.condition);var block=condition?node.ifBlock:node.elseBlock;this.parseBlock(context,block)}else if(type==="loop"){var varName=node.variable.name;var start=this.parseNode(context,node.start);var stop=this.parseNode(context,node.stop);var block=node.block;if(typeof start!=="number"){throw new Error("Loop's start must be a number, found: "+typeof start+"'")}if(typeof stop!=="number"){throw new Error("Loop's stop must be a number, found: "+typeof start+"'")}this.setVariable(context,node.variable,start);for(this.contexts[context][varName];this.contexts[context][varName]<=stop;this.contexts[context][varName]++){this.parseBlock(context,block)}}else if(type==="while"){var condition=node.condition;var block=node.block;while(this.parseNode(context,condition)){this.parseBlock(context,block)}}else if(type==="function"){this.functions[node.name]=node;return undefined}else if(type==="function_call"){var funcName=node.name;var callParams=node.params.map(function(param){return this.parseNode(context,param)}.bind(this));var func=this.functions[funcName];if(func===undefined){throw new Error("Function '"+funcName+"' is not declared")}var block=func.block;var context=this.createContext(funcName,func.params,callParams);this.parseBlock(context,block);return this.returns[context]}else if(OPERATIONS_BY_OPERANDS[1].indexOf(type)!==-1){var operand=this.parseNode(context,node.operand);return executeOperation(node.type,operand)}else if(OPERATIONS_BY_OPERANDS[2].indexOf(type)!==-1){var left=this.parseNode(context,node.left);var right=this.parseNode(context,node.right);return executeOperation(node.type,left,right)}else{throw new Error("Unhandled node type: '"+node.type+"'")}}else if(Array.isArray(node)){throw new Error("Expecting node, not node list: "+JSON.stringify(node))}else if(node!==null&&node!==undefined){return node}else{throw new Error("Invalid node: '"+node+"'")}};module.exports=SunCompiler},{"./operations":9,"./parser":10,debug:3,"readline-sync":2}]},{},[11])(11)});
